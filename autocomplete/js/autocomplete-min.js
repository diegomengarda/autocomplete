(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";var t={url:"",width:"auto",minChars:2,maxHeight:200,params:{},zIndex:9999,type:"POST",cache:false,onSelectItem:function(){}};e.fn.autocomplete=function(n){function f(){i.lista.html("");i.bloco.hide()}function l(t){if(t.val().length>=i.settings.minChars){if(i.request){i.request.abort();f()}i.settings.params.q=i.el.val();i.request=e.ajax({type:i.settings.type,cache:i.settings.cache,url:i.settings.url,data:i.settings.params,dataType:i.settings.dataType}).done(function(e){i.request.abort();if(JSON.stringify(e)!="null"&&JSON.stringify(e)!="[]"&&JSON.stringify(e)!=""){c(e);i.bloco.show()}}).fail(function(e,t,n){console.log("Erro: "+e.responseText)})}else{f()}}function c(t){f();e.each(t,function(e,t){var n=t[0];var r=JSON.stringify(t[1]);i.lista.append("<li data-data='"+r+"'>"+n+"</li>")})}var r=this.length;if(r==0)return this;if(r>1){this.each(function(){e(this).larueAutocomplete(n)});return this}var i={};var s=this;i.el=this;var o=function(){i.settings=e.extend({},t,n);i.width=i.settings.width=="auto"?i.el.outerWidth():i.settings.width;i.offsetLeft=i.el.offset().left;i.offsetBottom=i.el.outerHeight()+i.el.offset().top;i.idref="id_"+Math.random().toString(36).slice(-8);u()};var u=function(){i.el.attr("autocomplete","off");i.el.attr("id",i.idref);e("body").append('<div data-id="'+i.idref+'" class="fn_autocomplete"><ul></ul></div>');i.bloco=e('div[data-id="'+i.idref+'"]');i.lista=i.bloco.find("ul");i.bloco.css({width:i.width,maxHeight:i.settings.maxHeight,left:i.offsetLeft,top:i.offsetBottom,zIndex:i.settings.zIndex});a()};var a=function(){function t(e){i.el.val(e.text());f();return i.settings.onSelectItem(i.el,e.data("data"))}i.el.on("keyup",function(){l(e(this))});i.lista.on("click","li",function(){t(e(this))})};e("body:not(.fn_autocomplete)").click(function(){if(e(".fn_autocomplete").is(":visible")){e(".fn_autocomplete").hide()}});o();return this}})